# Code gevonden hier: https://medium.com/@ggaighernt/optical-flow-and-motion-detection-5154c6ba4419

import numpy as np
import matplotlib.pyplot as plt
import math

# angles_list = [359.90442, 44.592888, 67.76134, 72.80711, 40.270298, 61.352386, 34.63748, 60.76015, 86.987045, 17.545218, 72.591324, 266.3885, 132.2811, 54.24192, 11.112238, 185.88031, 26.525047, 1.3687559, 183.73648, 195.17305, 185.7537, 188.18405, 186.48196, 196.40251, 128.08069, 22.236307, 1.1725934, 350.34506, 172.11444, 208.44165, 202.3706, 319.86395, 275.05045, 204.79085, 191.89565, 179.29726, 23.117105, 148.94763, 227.79047, 172.57892, 175.14708, 183.69286, 151.77167, 188.52289, 161.5443, 194.53265, 226.98999, 176.79968, 124.09958, 337.6059, 148.733, 198.69794, 297.64548, 201.79805, 193.5212, 317.42175, 136.50995, 312.2534, 305.62683, 317.3949, 348.5445, 347.78635, 349.72458, 341.93542, 352.65662, 17.980421, 11.959893, 14.626406, 7.189131, 160.4601, 13.163305, 186.10791, 348.81494, 198.70425, 201.64313, 328.6894, 201.50607, 202.1736, 30.498814, 2.2511113, 4.586534, 5.9430904, 358.0791, 359.9949, 359.90143, 3.6466224, 349.29724, 60.4282, 177.31651, 51.276558, 32.785393, 9.44686, 49.153927, 14.715556, 16.459187, 20.135431, 2.8707988, 354.3294, 18.774937, 38.456734, 34.92653, 40.212753, 180.3122, 89.01177, 89.21491, 89.66001, 89.54251, 82.994576, 269.04248, 185.7389, 219.64919, 58.21155, 57.797802, 61.18911, 178.89146, 262.07672, 261.4917, 181.87988, 182.1551, 263.73273, 181.75743, 189.68793, 182.60217, 181.09015, 180.48393, 179.17847, 0, 3.9665756, 359.06668, 354.70554, 351.92657, 348.35898, 352.47006, 359.14124, 354.31546, 5.67566, 5.1256957, 2.446676, 348.48904, 358.12704, 3.3069432, 189.62155, 162.36292, 3.944408, 139.92572, 50.87159, 158.9335, 352.75595, 14.158996, 8.941898, 8.159618, 358.63885, 5.1294346, 358.97278, 357.47668, 358.9455, 359.95282, 354.7457, 359.91058, 356.6835, 353.89685, 354.02112, 342.67984, 271.69077, 262.229, 310.04092, 198.98944, 186.26257, 194.39212, 191.52235, 198.66788, 193.7983, 196.54404, 188.47787, 189.75586, 192.33961, 205.57863, 185.80655, 182.73192, 222.44028, 216.02502, 210.10513, 224.40775, 329.9419, 214.43529, 188.02792, 220.35403, 217.71841]
# angles_list = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 87.259415, 0, 86.71483, 0, 0, 0, 81.77498, 91.3234, 3.6003947, 149.2013, 1.6080731, 33.977283, 146.70462, 29.706686, 29.158194, 6.006532, 151.87178, 121.62192, 53.080284, 53.81531, 56.972523, 47.663776, 73.439186, 38.026085, 82.77038, 78.56189, 88.412254, 86.63622, 90.47653, 87.42501, 92.1413, 41.426704, 37.944332, 46.714424, 34.366352, 14.954351, 45.650776, 11.180611, 45.122997, 39.355312, 41.724697, 43.44214, 48.408363, 69.60373, 98.053955, 20.51404, 10.321893, 13.757402, 22.55018, 23.231209, 62.60826, 59.183235, 56.477436, 69.29251, 23.489302, 60.368767, 56.983204, 9.038916, 15.784983, 8.05707, 18.024729, 9.448919, 10.920568, 9.327074, 52.68387, 29.923944, 27.976063, 13.74935, 13.565307, 21.56237, 33.558323, 22.375412, 23.34482, 23.257442, 39.665787, 118.5523, 163.74832, 161.51112, 0, 92.38017, 196.81485, 182.54164, 180.61989, 179.88377, 179.75156, 138.54715, 152.78165, 179.96828, 191.24216, 191.62321, 181.5597, 148.79124, 174.19083, 185.36453, 177.24959, 184.85529, 185.34322, 179.9102, 183.55966, 179.93015, 175.41992, 175.6373, 181.36229, 176.26642, 174.8661, 179.9524, 180.00981, 179.83313, 182.64545, 175.80736, 176.85785, 177.51254, 177.43057, 176.49524, 179.89363, 180.00967, 182.32448, 180.05312, 182.9179, 175.13672, 171.08698, 180.02663, 164.04263, 173.48663, 182.00029, 169.99193, 179.85283, 164.4623, 179.78041, 180.01862, 182.32144, 176.98929, 181.00885, 180.81522, 185.2975, 185.44058, 187.53297, 184.6604, 183.70348, 178.78346, 176.05724, 174.62065, 168.41699, 174.37279, 180.0044, 179.1695, 171.88788, 11.031616, 0, 0, 162.43427, 167.84885, 171.08992, 1.4370565, 158.45982, 0, 171.869, 195.74161, 0.021915529, 123.765, 130.84442, 82.72715, 109.00296, 58.58275, 55.899246, 109.11496, 75.67389, 79.08415, 110.729965, 82.608864, 108.220215, 109.672806, 108.4314, 85.961494, 107.53317, 81.00937, 118.32864, 84.28165, 116.41809, 92.72547, 91.212555, 136.55112, 109.71496, 142.51793, 90.80174, 87.46038, 114.38751, 129.59517, 118.48964, 118.500885, 114.738914, 128.78741, 126.44939, 131.3298, 122.53392, 120.78389, 129.80496, 124.19943, 107.1693, 99.715866, 81.39337, 80.93129, 70.46418, 40.166004, 32.870846, 29.541119, 112.29411, 64.07463, 69.1685, 29.753065, 96.367035, 39.76682, 40.07698, 29.81517, 45.278564, 70.72064, 52.352264, 55.45108, 82.54051, 58.852943, 64.14468, 70.77125, 76.11038, 76.28771, 110.746925, 70.151566, 70.21684, 83.542816, 91.95549, 79.63345, 75.992775, 123.712006, 75.3495, 131.71396, 38.098976, 49.999893, 54.11035, 57.450108, 120.366165, 119.00725, 56.856113, 61.33407, 64.053154, 62.181633, 59.053955, 101.85623, 11.537556, 79.07656]
# angles_list = [ 87.259415, 86.71483, 81.77498, 91.3234, 3.6003947, 149.2013, 1.6080731, 33.977283, 146.70462, 29.706686, 29.158194, 6.006532, 151.87178, 121.62192, 53.080284, 53.81531, 56.972523, 47.663776, 73.439186, 38.026085, 82.77038, 78.56189, 88.412254, 86.63622, 90.47653, 87.42501, 92.1413, 41.426704, 37.944332, 46.714424, 34.366352, 14.954351, 45.650776, 11.180611, 45.122997, 39.355312, 41.724697, 43.44214]
# angles_list = [87.259415, 86.71483, 81.77498, 91.3234, 3.6003947, 149.2013, 1.6080731, 33.977283, 146.70462, 29.706686, 29.158194, 6.006532, 151.87178, 121.62192, 53.080284, 53.81531, 56.972523, 47.663776, 73.439186, 38.026085, 82.77038, 78.56189, 88.412254, 86.63622, 90.47653, 87.42501, 92.1413, 41.426704, 37.944332, 46.714424, 34.366352, 14.954351, 45.650776, 11.180611, 45.122997, 39.355312, 41.724697, 43.44214, 48.408363, 69.60373, 98.053955, 20.51404, 10.321893, 13.757402, 22.55018, 23.231209, 62.60826, 59.183235, 56.477436, 69.29251, 23.489302, 60.368767, 56.983204, 9.038916, 15.784983, 8.05707, 18.024729, 9.448919, 10.920568, 9.327074, 52.68387, 29.923944, 27.976063, 13.74935, 13.565307, 21.56237, 33.558323, 22.375412, 23.34482, 23.257442, 39.665787, 118.5523, 163.74832, 161.51112, 92.38017, 196.81485, 182.54164, 180.61989, 179.88377, 179.75156, 138.54715, 152.78165, 179.96828, 191.24216, 191.62321, 181.5597, 148.79124, 174.19083, 185.36453, 177.24959, 184.85529, 185.34322, 179.9102, 183.55966, 179.93015, 175.41992, 175.6373, 181.36229, 176.26642, 174.8661, 179.9524, 180.00981, 179.83313, 182.64545, 175.80736, 176.85785, 177.51254, 177.43057, 176.49524, 179.89363, 180.00967, 182.32448, 180.05312, 182.9179, 175.13672, 171.08698, 180.02663, 164.04263, 173.48663, 182.00029, 169.99193, 179.85283, 164.4623, 179.78041, 180.01862, 182.32144, 176.98929, 181.00885, 180.81522, 185.2975, 185.44058, 187.53297, 184.6604, 183.70348, 178.78346, 176.05724, 174.62065, 168.41699, 174.37279, 180.0044, 179.1695, 171.88788, 11.031616, 162.43427, 167.84885, 171.08992, 1.4370565, 158.45982, 171.869, 195.74161, 0.021915529, 123.765, 130.84442, 82.72715, 109.00296]
# angles_list = [87.259415, 86.71483, 81.77498, 91.3234, 3.6003947, 149.2013, 1.6080731, 33.977283, 146.70462, 29.706686, 29.158194, 6.006532, 151.87178, 121.62192, 53.080284, 53.81531, 56.972523, 47.663776, 73.439186, 38.026085, 82.77038, 78.56189, 88.412254, 86.63622, 90.47653, 87.42501, 92.1413, 41.426704, 37.944332, 46.714424, 34.366352, 14.954351, 45.650776, 11.180611, 45.122997, 39.355312, 41.724697, 43.44214, 48.408363, 69.60373, 98.053955, 20.51404, 10.321893, 13.757402, 22.55018, 23.231209, 62.60826, 59.183235, 56.477436, 69.29251, 23.489302, 60.368767, 56.983204, 9.038916, 15.784983, 8.05707, 18.024729, 9.448919, 10.920568, 9.327074, 52.68387, 29.923944, 27.976063, 13.74935, 13.565307, 21.56237, 33.558323, 22.375412, 23.34482, 23.257442, 39.665787, 118.5523, 163.74832, 161.51112, 92.38017, 196.81485, 182.54164, 180.61989, 179.88377, 179.75156, 138.54715, 152.78165, 179.96828, 191.24216, 191.62321, 181.5597, 148.79124, 174.19083, 185.36453, 177.24959, 184.85529, 185.34322, 179.9102, 183.55966, 179.93015, 175.41992, 175.6373, 181.36229, 176.26642, 174.8661, 179.9524, 180.00981, 179.83313, 182.64545, 175.80736, 176.85785, 177.51254, 177.43057, 176.49524, 179.89363, 180.00967, 182.32448, 180.05312, 182.9179, 175.13672, 171.08698, 180.02663, 164.04263, 173.48663, 182.00029, 169.99193, 179.85283, 164.4623, 179.78041, 180.01862, 182.32144, 176.98929, 181.00885, 180.81522, 185.2975, 185.44058, 187.53297, 184.6604, 183.70348, 178.78346, 176.05724, 174.62065, 168.41699, 174.37279, 180.0044, 179.1695, 171.88788, 11.031616, 162.43427, 167.84885, 171.08992, 1.4370565, 158.45982, 171.869, 195.74161, 0.021915529, 123.765, 130.84442, 82.72715, 109.00296, 58.58275, 55.899246, 109.11496, 75.67389, 79.08415, 110.729965, 82.608864, 108.220215, 109.672806, 108.4314, 85.961494, 107.53317, 81.00937, 118.32864, 84.28165, 116.41809, 92.72547, 91.212555, 136.55112, 109.71496, 142.51793, 90.80174, 87.46038, 114.38751, 129.59517, 118.48964, 118.500885, 114.738914, 128.78741, 126.44939, 131.3298, 122.53392, 120.78389, 129.80496, 124.19943, 107.1693, 99.715866, 81.39337, 80.93129, 70.46418, 40.166004, 32.870846, 29.541119, 112.29411, 64.07463, 69.1685, 29.753065, 96.367035, 39.76682, 40.07698, 29.81517, 45.278564, 70.72064, 52.352264, 55.45108, 82.54051, 58.852943, 64.14468, 70.77125, 76.11038, 76.28771, 110.746925, 70.151566, 70.21684, 83.542816, 91.95549]
# angles_list = [87.259415, 86.71483, 81.77498, 91.3234, 3.6003947, 149.2013, 1.6080731, 33.977283, 146.70462, 29.706686, 29.158194, 6.006532, 151.87178, 121.62192, 53.080284, 53.81531, 56.972523, 47.663776, 73.439186, 38.026085, 82.77038, 78.56189, 88.412254, 86.63622, 90.47653, 87.42501, 92.1413, 41.426704, 37.944332, 46.714424, 34.366352, 14.954351, 45.650776, 11.180611, 45.122997, 39.355312, 41.724697, 43.44214, 48.408363, 69.60373, 98.053955, 20.51404, 10.321893, 13.757402, 22.55018, 23.231209, 62.60826, 59.183235, 56.477436]
# angles_list = [87.259415, 86.71483, 81.77498, 91.3234, 3.6003947, 149.2013, 1.6080731, 33.977283, 146.70462, 29.706686, 29.158194, 6.006532, 151.87178, 121.62192, 53.080284, 53.81531, 56.972523, 47.663776, 73.439186, 38.026085, 82.77038, 78.56189, 88.412254, 86.63622, 90.47653, 87.42501, 92.1413, 41.426704, 37.944332, 46.714424, 34.366352, 14.954351, 45.650776, 11.180611, 45.122997, 39.355312, 41.724697, 43.44214, 48.408363, 69.60373, 98.053955, 20.51404, 10.321893, 13.757402, 22.55018, 23.231209, 62.60826, 59.183235, 56.477436, 69.29251, 23.489302, 60.368767, 56.983204, 9.038916, 15.784983, 8.05707, 18.024729, 9.448919, 10.920568, 9.327074, 52.68387, 29.923944, 27.976063, 13.74935, 13.565307, 21.56237, 33.558323, 22.375412, 23.34482, 23.257442, 39.665787, 118.5523, 163.74832, 161.51112, 92.38017, 196.81485, 182.54164, 180.61989, 179.88377, 179.75156, 138.54715, 152.78165, 179.96828, 191.24216, 191.62321, 181.5597, 148.79124, 174.19083, 185.36453, 177.24959, 184.85529, 185.34322, 179.9102, 183.55966, 179.93015, 175.41992, 175.6373, 181.36229, 176.26642, 174.8661, 179.9524, 180.00981, 179.83313, 182.64545, 175.80736, 176.85785, 177.51254, 177.43057, 176.49524, 179.89363, 180.00967, 182.32448, 180.05312, 182.9179, 175.13672, 171.08698, 180.02663, 164.04263, 173.48663, 182.00029, 169.99193, 179.85283, 164.4623, 179.78041, 180.01862, 182.32144, 176.98929, 181.00885, 180.81522, 185.2975, 185.44058, 187.53297, 184.6604, 183.70348, 178.78346, 176.05724, 174.62065, 168.41699, 174.37279]
# angles_list = [87.259415, 86.71483, 81.77498, 91.3234, 3.6003947, 149.2013, 1.6080731, 33.977283, 146.70462, 29.706686, 29.158194, 6.006532, 151.87178, 121.62192, 53.080284, 53.81531, 56.972523, 47.663776, 73.439186, 38.026085, 82.77038, 78.56189, 88.412254, 86.63622, 90.47653, 87.42501, 92.1413, 41.426704, 37.944332, 46.714424, 34.366352, 14.954351, 45.650776, 11.180611, 45.122997, 39.355312, 41.724697, 43.44214, 48.408363, 69.60373, 98.053955, 20.51404, 10.321893, 13.757402, 22.55018, 23.231209, 62.60826, 59.183235, 56.477436, 69.29251, 23.489302, 60.368767, 56.983204, 9.038916, 15.784983, 8.05707, 18.024729, 9.448919, 10.920568, 9.327074, 52.68387, 29.923944, 27.976063, 13.74935, 13.565307, 21.56237, 33.558323, 22.375412, 23.34482, 23.257442, 39.665787, 118.5523, 163.74832, 161.51112, 92.38017, 196.81485, 182.54164, 180.61989, 179.88377, 179.75156, 138.54715, 152.78165, 179.96828, 191.24216, 191.62321, 181.5597, 148.79124, 174.19083, 185.36453, 177.24959, 184.85529, 185.34322, 179.9102, 183.55966, 179.93015, 175.41992, 175.6373, 181.36229, 176.26642, 174.8661, 179.9524, 180.00981, 179.83313, 182.64545, 175.80736, 176.85785, 177.51254, 177.43057, 176.49524, 179.89363, 180.00967, 182.32448, 180.05312, 182.9179, 175.13672, 171.08698, 180.02663, 164.04263, 173.48663, 182.00029, 169.99193, 179.85283, 164.4623, 179.78041, 180.01862, 182.32144, 176.98929, 181.00885, 180.81522, 185.2975, 185.44058, 187.53297, 184.6604, 183.70348, 178.78346, 176.05724, 174.62065, 168.41699, 174.37279, 180.0044, 179.1695, 171.88788, 11.031616, 162.43427, 167.84885, 171.08992, 1.4370565, 158.45982, 171.869, 195.74161, 0.021915529, 123.765, 130.84442, 82.72715, 109.00296, 58.58275, 55.899246, 109.11496, 75.67389, 79.08415, 110.729965, 82.608864, 108.220215, 109.672806, 108.4314, 85.961494, 107.53317, 81.00937, 118.32864, 84.28165, 116.41809, 92.72547, 91.212555, 136.55112, 109.71496, 142.51793, 90.80174, 87.46038, 114.38751, 129.59517, 118.48964, 118.500885, 114.738914, 128.78741, 126.44939, 131.3298, 122.53392, 120.78389, 129.80496, 124.19943, 107.1693, 99.715866, 81.39337, 80.93129, 70.46418, 40.166004, 32.870846, 29.541119, 112.29411, 64.07463, 69.1685, 29.753065, 96.367035, 39.76682, 40.07698, 29.81517, 45.278564, 70.72064, 52.352264, 55.45108, 82.54051, 58.852943, 64.14468, 70.77125, 76.11038, 76.28771, 110.746925, 70.151566, 70.21684, 83.542816, 91.95549, 79.63345, 75.992775, 123.712006, 75.3495, 131.71396, 38.098976, 49.999893, 54.11035, 57.450108, 120.366165, 119.00725, 56.856113, 61.33407, 64.053154, 62.181633, 59.053955, 101.85623, 11.537556, 79.07656]
angles_list = [90, 90, 90, 90, 90, 90, 90, 45, 90, 90, 90, 90, 90]

# RUN "optical_flow.py" en kopieer dan vervolgens de "angles_list" die wordt geprint op het eind.
# die array moet je als waarde hier bovenin meegeven voor angles_list.
# Er staan wel 'nan' items in die array, die moet je even verwijderen in vscode met search and replace. ("nan, " wordt "")

# Vervolgens kun je process_angles.py runnen. De bedoeling is om hiermee het pad te plotten dat hij heeft gereden.




x_axis_length = len(angles_list)
y_axis_length = max(angles_list)

print(x_axis_length)
data = np.full((x_axis_length, 2), [0.0, 0.0])
index = 0
current_angle = 0

for angle in angles_list:
    index += 1

    if(index != 0 and index < len(angles_list)):
        x_addition = 3
        y_addition = 3
        if(angle < 85 or angle >= 95):
            current_angle = angle

        if (85 < angle and angle <= 95):
            x_addition = math.cos(math.radians(current_angle))
        else:
            x_addition = 0
        
        if (85 < angle and angle <= 95):
            y_addition = math.sin(math.radians(current_angle))
        else:
            y_addition = 0
        
        data[index] = [data[index-1][0] + x_addition, data[index-1][1] + y_addition]

print(data)


x, y = data.T
plt.scatter(x, y)
plt.show()  